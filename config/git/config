[include]
    path = ~/dotfiles/private/git/config

[alias]
    unstage = reset HEAD --
    last = log -1 HEAD
    wtl = worktree list

    co = checkout
    fc = clone --recurse --jobs 7

    b  = branch
    c  = commit
    d  = diff
    d2 = icdiff
    f  = fetch
    h  = help
    i  = incoming
    o  = outgoing
    s  = status

    p = pull --ff-only
    pullrs = pull --rebase --autostash

    outgoing = !git fetch && git l FETCH_HEAD..
    incoming = !git fetch && git l ..FETCH_HEAD

    dd = difftool --dir-diff

    t = l0 --max-count=15
    t2 = l0 --max-count=30
    l0 = log --pretty='%C(auto)%d%Creset %<|(100,trunc)%s%C(bold cyan)%<(18,trunc)% ae %Cblue(%cr) %C(bold black)%h'
    l = log --graph --pretty='%<|(10) %C(auto)%d%Creset %<|(100,trunc)%s%C(bold cyan)%<(18,trunc)% ae %Cblue(%cr) %C(bold black)%h'
    ll = log --graph --stat='100,0,20' --stat-graph-width=20 --pretty='___%n   \\%n%C(auto)%d%Creset %s%n%C(bold cyan)% ae %Cblue(%cr) %C(bold black)%h'

    patch = !git --no-pager diff --no-color
    root = rev-parse --show-toplevel

    curbranch = rev-parse --abbrev-ref HEAD
    testbranch = rev-parse --verify

    trash = !git add -A && git commit -m 'TRASH' && git reset --hard HEAD^
    stp = stash push -u

    # easily get into git environment for testing
    sh = !sh

[core]
    eol = lf
    autocrlf = input
    editor = micro
    excludesfile = ~/.config/git/ignore

    # TODO: `--pattern` is problematic, gives errors when pattern not found (like when no diffs in output), and either way prevents exit on non-filled-screen.
    #pager = perl ~/dotfiles/scripts/diff-so-fancy/diff-so-fancy | less --pattern '^(Date|added|deleted|modified):'
    pager = perl ~/dotfiles/scripts/diff-so-fancy/diff-so-fancy | less

[credential]
    modalprompt = false

[diff]
    algorithm = histogram
    renames = copies
    mnemonicprefix = true
    tool = vimdiff3

[difftool "vimdiff3"]
;    path = nvim

[diff-so-fancy]
    stripLeadingSymbols = false

[icdiff]
    # want: --color-map=meta:white (but doesn't seem to do anything)
    options = --line-numbers --line-number-width=4 --strip-trailing-cr --numlines=3
    pager = less

[fetch]
    prune = true

[merge]
    stat = true
    tool = vimdiff3

[mergetool "vimdiff3"]
;    path = nvim

[push]
    default = simple

[submodule]
    fetchJobs = 4
    recurse = true

[color]
    ui = true
[color "diff-highlight"]
    oldNormal = red bold
    oldHighlight = red bold 52
    newNormal = green bold
    newHighlight = green bold 22
[color "diff"]
    meta = yellow
    frag = magenta
    commit = yellow bold
    old = red bold
    new = green bold
    whitespace = red reverse

[tig]
    horizontal-scroll = 10
    ignore-case = smart-case
    line-graphics = utf-8
    tab-size = 4
    refresh-mode = auto
    mouse = true

    main-view = id date:relative-compact author:email-user commit-title:graph=v2,refs=yes

#   diff-highlight = true  -- not currently avail w termux

#   TODO: move this stuff to ~/.config/tig/config

[filter "lfs"]
    required = true
    clean = git-lfs clean -- %f
    smudge = git-lfs smudge -- %f
    process = git-lfs filter-process

[user]
    name = Scott Bilas
    # https://orrsella.com/2013/08/10/git-using-different-user-emails-for-different-repositories/
    useConfigOnly = true
